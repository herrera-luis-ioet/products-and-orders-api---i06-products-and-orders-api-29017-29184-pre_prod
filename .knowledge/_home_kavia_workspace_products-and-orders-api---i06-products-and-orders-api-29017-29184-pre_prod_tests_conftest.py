{"is_source_file": true, "format": "Python", "description": "This file contains Pytest configuration and fixtures for testing a FastAPI application, including database setup, API client creation, and test data generation.", "external_files": ["app.api.v1.api", "app.config", "app.database", "app.models.order", "app.models.product"], "external_methods": ["get_db", "init_db", "sessionmaker"], "published": ["test_settings", "override_settings", "engine", "reset_db", "db_session", "override_get_db", "app", "client", "product_data", "order_data", "test_products", "test_orders"], "classes": [], "methods": [{"name": "Settings test_settings()", "description": "Creates test settings with file-based SQLite database for testing.", "scope": "", "scopeKind": ""}, {"name": "None override_settings(test_settings: Settings)", "description": "Overrides application settings with test settings.", "scope": "", "scopeKind": ""}, {"name": "engine()", "description": "Creates an async SQLAlchemy engine for tests.", "scope": "", "scopeKind": ""}, {"name": "reset_db(engine)", "description": "Resets the database tables between tests to ensure a clean state.", "scope": "", "scopeKind": ""}, {"name": "AsyncGenerator[AsyncSession,None] db_session(engine, reset_db)", "description": "Creates an async database session for tests.", "scope": "", "scopeKind": ""}, {"name": "AsyncGenerator override_get_db(db_session: AsyncSession)", "description": "Overrides the get_db dependency for tests.", "scope": "", "scopeKind": ""}, {"name": "FastAPI app(override_get_db)", "description": "Creates a test FastAPI application with overridden dependencies.", "scope": "", "scopeKind": ""}, {"name": "AsyncGenerator[AsyncClient,None] client(app: FastAPI)", "description": "Creates an async HTTP client for testing the FastAPI application.", "scope": "", "scopeKind": ""}, {"name": "Dict product_data()", "description": "Creates test product data for use in tests.", "scope": "", "scopeKind": ""}, {"name": "Dict order_data()", "description": "Creates test order data for use in tests.", "scope": "", "scopeKind": ""}, {"name": "List[Product] test_products(db_session: AsyncSession)", "description": "Creates test products in the database for use in tests.", "scope": "", "scopeKind": ""}, {"name": "List[Order] test_orders(db_session: AsyncSession, test_products: List[Product])", "description": "Creates test orders in the database for use in tests.", "scope": "", "scopeKind": ""}, {"name": "_get_test_db()", "scope": "override_get_db", "scopeKind": "function", "description": "unavailable"}], "calls": ["os.path.exists", "os.remove", "Base.metadata.create_all", "Base.metadata.drop_all", "db_session.add", "db_session.commit", "db_session.refresh"], "search-terms": ["pytest", "fixture", "FastAPI", "database", "testing"], "state": 2, "file_id": 30, "knowledge_revision": 107, "git_revision": "ff18e2b0ed147be6b70a9c294b26f436f021ecbe", "revision_history": [{"64": ""}, {"101": "ff18e2b0ed147be6b70a9c294b26f436f021ecbe"}, {"102": "ff18e2b0ed147be6b70a9c294b26f436f021ecbe"}, {"103": "ff18e2b0ed147be6b70a9c294b26f436f021ecbe"}, {"104": "ff18e2b0ed147be6b70a9c294b26f436f021ecbe"}, {"105": "ff18e2b0ed147be6b70a9c294b26f436f021ecbe"}, {"106": "ff18e2b0ed147be6b70a9c294b26f436f021ecbe"}, {"107": "ff18e2b0ed147be6b70a9c294b26f436f021ecbe"}], "ctags": [{"_type": "tag", "name": "_get_test_db", "path": "/home/kavia/workspace/products-and-orders-api---i06-products-and-orders-api-29017-29184-pre_prod/tests/conftest.py", "pattern": "/^    async def _get_test_db():$/", "file": true, "language": "Python", "kind": "function", "signature": "()", "scope": "override_get_db", "scopeKind": "function"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/products-and-orders-api---i06-products-and-orders-api-29017-29184-pre_prod/tests/conftest.py", "pattern": "/^async def app(override_get_db) -> FastAPI:$/", "language": "Python", "typeref": "typename:FastAPI", "kind": "function", "signature": "(override_get_db)"}, {"_type": "tag", "name": "client", "path": "/home/kavia/workspace/products-and-orders-api---i06-products-and-orders-api-29017-29184-pre_prod/tests/conftest.py", "pattern": "/^async def client(app: FastAPI) -> AsyncGenerator[AsyncClient, None]:$/", "language": "Python", "typeref": "typename:AsyncGenerator[AsyncClient,None]", "kind": "function", "signature": "(app: FastAPI)"}, {"_type": "tag", "name": "db_session", "path": "/home/kavia/workspace/products-and-orders-api---i06-products-and-orders-api-29017-29184-pre_prod/tests/conftest.py", "pattern": "/^async def db_session(engine, reset_db) -> AsyncGenerator[AsyncSession, None]:$/", "language": "Python", "typeref": "typename:AsyncGenerator[AsyncSession,None]", "kind": "function", "signature": "(engine, reset_db)"}, {"_type": "tag", "name": "engine", "path": "/home/kavia/workspace/products-and-orders-api---i06-products-and-orders-api-29017-29184-pre_prod/tests/conftest.py", "pattern": "/^async def engine():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "main_app", "path": "/home/kavia/workspace/products-and-orders-api---i06-products-and-orders-api-29017-29184-pre_prod/tests/conftest.py", "pattern": "/^    from app.main import app as main_app$/", "file": true, "language": "Python", "kind": "unknown", "scope": "app", "scopeKind": "function", "nameref": "unknown:app"}, {"_type": "tag", "name": "order_data", "path": "/home/kavia/workspace/products-and-orders-api---i06-products-and-orders-api-29017-29184-pre_prod/tests/conftest.py", "pattern": "/^def order_data() -> Dict:$/", "language": "Python", "typeref": "typename:Dict", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "override_get_db", "path": "/home/kavia/workspace/products-and-orders-api---i06-products-and-orders-api-29017-29184-pre_prod/tests/conftest.py", "pattern": "/^async def override_get_db(db_session: AsyncSession) -> AsyncGenerator:$/", "language": "Python", "typeref": "typename:AsyncGenerator", "kind": "function", "signature": "(db_session: AsyncSession)"}, {"_type": "tag", "name": "override_settings", "path": "/home/kavia/workspace/products-and-orders-api---i06-products-and-orders-api-29017-29184-pre_prod/tests/conftest.py", "pattern": "/^def override_settings(test_settings: Settings) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(test_settings: Settings)"}, {"_type": "tag", "name": "product_data", "path": "/home/kavia/workspace/products-and-orders-api---i06-products-and-orders-api-29017-29184-pre_prod/tests/conftest.py", "pattern": "/^def product_data() -> Dict:$/", "language": "Python", "typeref": "typename:Dict", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "reset_db", "path": "/home/kavia/workspace/products-and-orders-api---i06-products-and-orders-api-29017-29184-pre_prod/tests/conftest.py", "pattern": "/^async def reset_db(engine):$/", "language": "Python", "kind": "function", "signature": "(engine)"}, {"_type": "tag", "name": "test_orders", "path": "/home/kavia/workspace/products-and-orders-api---i06-products-and-orders-api-29017-29184-pre_prod/tests/conftest.py", "pattern": "/^async def test_orders(db_session: AsyncSession, test_products: List[Product]) -> List[Order]:$/", "language": "Python", "typeref": "typename:List[Order]", "kind": "function", "signature": "(db_session: AsyncSession, test_products: List[Product])"}, {"_type": "tag", "name": "test_products", "path": "/home/kavia/workspace/products-and-orders-api---i06-products-and-orders-api-29017-29184-pre_prod/tests/conftest.py", "pattern": "/^async def test_products(db_session: AsyncSession) -> List[Product]:$/", "language": "Python", "typeref": "typename:List[Product]", "kind": "function", "signature": "(db_session: AsyncSession)"}, {"_type": "tag", "name": "test_settings", "path": "/home/kavia/workspace/products-and-orders-api---i06-products-and-orders-api-29017-29184-pre_prod/tests/conftest.py", "pattern": "/^def test_settings() -> Settings:$/", "language": "Python", "typeref": "typename:Settings", "kind": "function", "signature": "()"}], "filename": "/home/kavia/workspace/products-and-orders-api---i06-products-and-orders-api-29017-29184-pre_prod/tests/conftest.py", "hash": "c3876751ffeb651005baebf3f5a19044", "format-version": 4, "code-base-name": "default"}